{% load static %}
<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Panel Admin - Solicitudes | MuuuSica</title>
    <style>
        body { background-color: #121212; color: white; padding: 20px; font-family: sans-serif; }
        .admin-container { max-width: 1000px; margin: 0 auto; }
        .header-admin { display: flex; justify-content: space-between; align-items: center; margin-bottom: 30px; border-bottom: 1px solid #333; padding-bottom: 20px; }
        
        .requests-table { width: 100%; border-collapse: collapse; background: #1e1e1e; border-radius: 8px; overflow: hidden; }
        .requests-table th, .requests-table td { padding: 15px; text-align: left; border-bottom: 1px solid #333; }
        .requests-table th { background-color: #2a2a2a; color: #ff1493; font-weight: bold; text-transform: uppercase; font-size: 0.85rem; }
        .requests-table tr:hover { background-color: #252525; }
        
        .user-info { display: flex; align-items: center; gap: 10px; }
        .avatar-small { width: 40px; height: 40px; border-radius: 50%; object-fit: cover; background: #333; }
        
        .action-buttons { display: flex; gap: 10px; }
        .btn-action { border: none; padding: 8px 15px; border-radius: 5px; cursor: pointer; color: white; font-size: 0.9rem; transition: all 0.3s; }
        .btn-approve { background-color: #1db954; }
        .btn-approve:hover { background-color: #1ed760; }
        .btn-reject { background-color: #e91429; }
        .btn-reject:hover { background-color: #ff4444; }
        
        .empty-state { text-align: center; padding: 50px; color: #777; }
        .empty-state-icon { font-size: 60px; margin-bottom: 15px; }
        
        .btn-back { background: #333; color: white; padding: 10px 20px; text-decoration: none; border-radius: 20px; font-size: 0.9rem; }
        .btn-back:hover { background: #444; }
        
        .message { padding: 15px; margin-bottom: 20px; border-radius: 5px; }
        .message.success { background: rgba(29, 185, 84, 0.2); border: 1px solid #1db954; color: #1db954; }
        .message.error { background: rgba(233, 20, 41, 0.2); border: 1px solid #e91429; color: #ff6666; }
    </style>
</head>
<body>

<div class="admin-container">
    <div class="header-admin">
        <h1>üõ°Ô∏è Panel de Administraci√≥n</h1>
        <div>
            <span>Hola, {{ usuario.nombre }}</span>
            <a href="{% url 'lista_reproduccion' %}" class="btn-back" style="margin-left: 15px;">‚Üê Volver</a>
        </div>
    </div>

    <h2>Solicitudes de Artista Pendientes</h2>

    {% if messages %}
        {% for message in messages %}
            <div class="message {% if message.tags == 'error' %}error{% else %}success{% endif %}">
                {{ message }}
            </div>
        {% endfor %}
    {% endif %}

    {% if solicitudes %}
    <table class="requests-table">
        <thead>
            <tr>
                <th>Usuario</th>
                <th>Nombre Art√≠stico</th>
                <th>G√©nero</th>
                <th>Fecha</th>
                <th>Acciones</th>
            </tr>
        </thead>
        <tbody>
            {% for req in solicitudes %}
            <tr>
                <td>
                    <div class="user-info">
                        {% if req.usuario.foto_perfil_path %}
                            <img src="{{ req.usuario.foto_perfil_path }}" class="avatar-small">
                        {% else %}
                            <div class="avatar-small" style="display:flex;align-items:center;justify-content:center;">üë§</div>
                        {% endif %}
                        <div>
                            <strong>{{ req.usuario.nombre }}</strong><br>
                            <small style="color: #888;">{{ req.usuario.email }}</small>
                        </div>
                    </div>
                </td>
                <td>
                    <strong>{{ req.nombre_artistico }}</strong><br>
                    <small style="color: #888;">{{ req.mensaje_motivo|truncatechars:50 }}</small>
                </td>
                <td>{{ req.genero|default:"No especificado" }}</td>
                <td style="color: #aaa;">{{ req.fecha_solicitud|date:"d/m/Y" }}</td>
                <td>
                    <div class="action-buttons">
                        <form method="POST" style="display:inline;">
                            {% csrf_token %}
                            <input type="hidden" name="solicitud_id" value="{{ req.id }}">
                            <input type="hidden" name="accion" value="aprobar">
                            <button type="submit" class="btn-action btn-approve">‚úì Aprobar</button>
                        </form>
                        
                        <form method="POST" style="display:inline;">
                            {% csrf_token %}
                            <input type="hidden" name="solicitud_id" value="{{ req.id }}">
                            <input type="hidden" name="accion" value="rechazar">
                            <button type="submit" class="btn-action btn-reject">‚úï Rechazar</button>
                        </form>
                    </div>
                </td>
            </tr>
            {% endfor %}
        </tbody>
    </table>
    {% else %}
        <div class="empty-state">
            <div class="empty-state-icon">üì≠</div>
            <h3>No hay solicitudes pendientes</h3>
            <p>Cuando alguien solicite ser artista, aparecer√° aqu√≠.</p>
        </div>
    {% endif %}
</div>

</body>
</html>